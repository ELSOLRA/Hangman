<!DOCTYPE html>
<html>
  <head>
    <style>
      #output {
        font-size: 24px;
        text-align: center;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Kortspel: Gissa Högre, Lägre, eller Likvärdigt</h1>
    <p>Gissa om nästa kort är högre, lägre, eller likvärdigt!</p>
    <button id="higherButton">Högre</button>
    <button id="lowerButton">Lägre</button>
    <button id="equalButton">Likvärdigt</button>
    <p>Fel gissningar: <span id="wrongGuessCount">0</span></p>
    <div id="output"></div>

    <script>
      const higherButton = document.getElementById("higherButton");
      const lowerButton = document.getElementById("lowerButton");
      const equalButton = document.getElementById("equalButton");
      const wrongGuessCountElement = document.getElementById("wrongGuessCount");
      const output = document.getElementById("output");

      let deck = [...Array(52).keys()].map((card) => card + 1);
      let previousCard = deck.pop();
      let wrongGuessCount = 0;

      function getRandomCard() {
        return Math.floor(Math.random() * deck.length);
      }

      function handleGuess(guess) {
        const nextCardIndex = getRandomCard();
        const nextCard = deck.splice(nextCardIndex, 1)[0];

        if (
          (guess === "higher" && nextCard > previousCard) ||
          (guess === "lower" && nextCard < previousCard) ||
          (guess === "equal" && nextCard === previousCard)
        ) {
          output.textContent = `Rätt! Nästa kort är ${nextCard}.`;
          previousCard = nextCard;
        } else {
          output.textContent = `Fel! Nästa kort var ${nextCard}.`;
          wrongGuessCount++;
          wrongGuessCountElement.textContent = wrongGuessCount;

          if (wrongGuessCount === 3) {
            endGame();
          }
        }
      }

      function endGame() {
        higherButton.disabled = true;
        lowerButton.disabled = true;
        equalButton.disabled = true;
        output.textContent = `Spelet är slut! Du gjorde 3 felaktiga gissningar.`;
      }

      higherButton.addEventListener("click", () => handleGuess("higher"));
      lowerButton.addEventListener("click", () => handleGuess("lower"));
      equalButton.addEventListener("click", () => handleGuess("equal"));
    </script>
  </body>
</html>
